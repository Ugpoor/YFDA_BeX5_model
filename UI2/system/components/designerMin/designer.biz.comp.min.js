/*! 
* BeX5 v3 (http://www.justep.com) 
* Copyright 2015 Justep, Inc.
*/

/*! 
* WeX5 v3 (http://www.justep.com) 
* Copyright 2015 Justep, Inc.
* Licensed under Apache License, Version 2.0 (http://www.apache.org/licenses/LICENSE-2.0) 
*/

define("$model/UI2/system/components/justep/excel/designer/import",["require","css!./css/excel","jquery","../importExcel"],function(e){function r(e,n){var r=t(e.domNode);e.domNode.style.position="absolute",e.domNode.style.top||(e.domNode.style.top="10px",e.domNode.style.left="10px"),r.addClass(n)}e("css!./css/excel").load();var t=e("jquery"),n=e("../importExcel"),i=n.extend({init:function(e,t){r(this,"x-import-excel-designer"),this.callParent(e,t)}});return{"$UI/system/components/justep/excel/importExcel":i}}),define("$model/UI2/system/components/justep/excel/designer/export",["require","css!./css/excel","jquery","../exportExcel"],function(e){function r(e,n){var r=t(e.domNode);e.domNode.style.position="absolute",e.domNode.style.top||(e.domNode.style.top="10px",e.domNode.style.left="10px"),r.addClass(n)}e("css!./css/excel").load();var t=e("jquery"),n=e("../exportExcel"),i=n.extend({init:function(e,t){r(this,"x-export-excel-designer"),this.callParent(e,t)}});return{"$UI/system/components/justep/excel/exportExcel":i}}),define("$model/UI2/system/components/justep/org/designer/orgDialog",["require","jquery","../orgDialog","../orgDialogPC","css!./css/orgDialog"],function(e){var t=e("jquery"),n=e("../orgDialog"),r=e("../orgDialogPC");e("css!./css/orgDialog").load();var i=function(e,n){var r=t(e.domNode);e.domNode.style.position="absolute",e.domNode.style.top||(e.domNode.style.top="10px",e.domNode.style.left="10px"),r.addClass(n)},s=n.extend({init:function(e,t){i(this,"x-org-dialog"),this.callParent(e,t)}}),o=r.extend({init:function(e,t){i(this,"x-org-dialog"),this.callParent(e,t)}});return{"$UI/system/components/justep/org/orgDialog":s,"$UI/system/components/justep/org/orgDialogPC":o}}),define("$model/UI2/system/components/justep/org/designer/orgDialog",["require","jquery","../orgDialog","../orgDialogPC","css!./css/orgDialog"],function(e){var t=e("jquery"),n=e("../orgDialog"),r=e("../orgDialogPC");e("css!./css/orgDialog").load();var i=function(e,n){var r=t(e.domNode);e.domNode.style.position="absolute",e.domNode.style.top||(e.domNode.style.top="10px",e.domNode.style.left="10px"),r.addClass(n)},s=n.extend({init:function(e,t){i(this,"x-org-dialog"),this.callParent(e,t)}}),o=r.extend({init:function(e,t){i(this,"x-org-dialog"),this.callParent(e,t)}});return{"$UI/system/components/justep/org/orgDialog":s,"$UI/system/components/justep/org/orgDialogPC":o}}),define("$model/UI2/system/components/justep/org/designer/orgImage",["require","../orgImage"],function(e){var t=e("../orgImage"),n=t.extend({doInit:function(){this._getImg().attr("d_selectable",!1)}});return{"$UI/system/components/justep/org/orgImage":n}}),define("$model/UI2/system/components/justep/org/designer/orgSelect",["require","$UI/system/lib/justep","$UI/system/components/justep/gridSelect/designer/gridSelect"],function(e){var t=e("$UI/system/lib/justep"),n=e("$UI/system/components/justep/gridSelect/designer/gridSelect")["$UI/system/components/justep/gridSelect/gridSelect"],r=t.BindComponent.extend({doInit:function(){this.$domNode.children().attr("d_selectable",!1)}}),i=n.extend({doInit:function(){this.callParent();var e=this.$domNode[0].style.cssText;(!e||e.indexOf("absolute")==-1)&&this.$domNode.css({position:"relative"}),this.$domNode.find("div[component='$UI/system/components/justep/data/bizData']").css({position:"absolute",left:10,top:10}).attr({d_selectable:!0,d_canMove:!1})}});return{"$UI/system/components/justep/org/orgSelect":r,"$UI/system/components/justep/org/orgSelectPC":i}}),define("$model/UI2/system/components/justep/org/designer/orgTree",["require","$UI/system/components/justep/tree/designer/tree"],function(e){var t=e("$UI/system/components/justep/tree/designer/tree")["$UI/system/components/justep/tree/tree"],n=t.extend({init:function(e,t){this.callParent(e,t),this.$domNode.css({position:"relative"}),this.$domNode.find("div[component='$UI/system/components/justep/data/bizData']").css({position:"absolute",left:80}),this.$domNode.find(".x-tree-template").children("li").attr("d_canAddChild","true").attr("d_canRemove",!1).attr("d_selectable",!1)}});return{"$UI/system/components/justep/org/orgTree":n}}),define("$model/UI2/system/components/justep/smartFilter/designer/smartFilter",["require","../smartFilter"],function(e){var t=e("../smartFilter"),n=t.extend({init:function(e,t){this.callParent(e,t),this.$domNode.find("*").attr("d_selectable",!1).attr("d_canAddChild",!1),this.$domNode.find("input").attr("d_canRemove",!1)}});return{"$UI/system/components/justep/smartFilter/smartFilter":n}}),define("$model/UI2/system/components/justep/bizFilter/designer/bizFilter",["require","jquery","../bizFilter"],function(e){var t=e("jquery"),n=e("../bizFilter"),r=e.toUrl("./img/bizFilter-show.gif"),i=n.extend({init:function(e,n){this.callParent(e,n),this.$domNode=t(this.domNode),this.$domNode.append("<img src='"+r+"'/>"),this.domNode.style.position="absolute",this.domNode.style["z-index"]="1000",this.domNode.style.top||(this.domNode.style.top="100px",this.domNode.style.left="100px")}});return{"$UI/system/components/justep/bizFilter/bizFilter":i}}),define("$model/UI2/system/components/justep/orgFilter/designer/orgFilter",["require","../orgFilter"],function(e){var t=e("../orgFilter"),n=t.extend({init:function(e,t){this.callParent(e,t),this.$domNode.find("*").attr("d_selectable",!1).attr("d_canAddChild",!1).attr("d_canRemove",!1)}});return{"$UI/system/components/justep/orgFilter/orgFilter":n}}),define("$model/UI2/system/components/justep/social/relativeOrg/designer/relativeOrg",["require","css!./css/relativeOrg","jquery","$UI/system/lib/justep","../relativeOrg","../relativeOrgs","$UI/system/components/designerCommon/js/xuiService"],function(e){e("css!./css/relativeOrg").load();var t=e("jquery"),n=e("$UI/system/lib/justep"),r=e("../relativeOrg"),i=e("../relativeOrgs"),s=e("$UI/system/components/designerCommon/js/xuiService"),o=s.getXuiDoc(),u="		<div class='x-ro-title'>			<span class='x-ro-title-content pull-left'></span>			<div style='clear:both;' />		</div>",a="<div class='x-img-list x-img-list-border'/>",f=r.extend({init:function(e,n){this.$domNode=t(this.domNode),this.$domNode.append(u),this.setGroupName(this.$domNode.attr("groupName")),this.$domNode.append(a),this.$domNode.attr("d_canAdd",!1),t("*",this.$domNode).attr("d_canAdd",!1),t(">.x-ro-title *",this.$domNode).attr("d_selectable",!1).attr("d_canRemove",!1).attr("d_canMove",!1).attr("d_canAdd",!1)},set:function(e){if("groupName"in e){var t=e.groupName||"";this.setGroupName(t)}},setGroupName:function(e){this.$domNode.find(">.x-ro-title>.x-ro-title-content").text(e)}}),l=i.extend({init:function(){},add:function(){o.createComponent("$UI/system/components/justep/social/relativeOrg/relativeOrg#item",this,{paintComponent:!0})}}),c=function(e){this.domNode=e.templateNode,this.$domNode=t(this.domNode)};return c.prototype.init=function(){var e=this.$domNode.attr("groupName")||"";this.$domNode.append("<div>"+e+"</div>")},c.prototype.set=function(e){if("groupName"in e){var t=e.groupName||"";this.$domNode.find(">.x-ro-group-title").text(t)}},{"$UI/system/components/justep/social/relativeOrg/relativeOrg":f,"$UI/system/components/justep/social/relativeOrg/relativeOrgs":l,"$UI/system/components/justep/social/relativeOrg/relativeOrg#item":c}}),define("$model/UI2/system/components/justep/social/focus/designer/focus",["require","jquery","$UI/system/lib/justep","../focus"],function(e){var t=e("jquery"),n=e("$UI/system/lib/justep"),r=e("../focus"),i=r.extend({init:function(e,n){this.$domNode=t(this.domNode),this.$domNode.addClass("x-focus-star")}});return{"$UI/system/components/justep/social/focus/focus":i}}),define("$model/UI2/system/components/justep/attachment/designer/attachment",["require","jquery","../attachment","$UI/system/lib/base/component","$UI/system/lib/justep","bind","$UI/system/components/designerCommon/js/xuiService"],function(e){var t=e("jquery"),n=e("../attachment"),r=e("$UI/system/lib/base/component"),i=e("$UI/system/lib/justep"),s=e("bind"),o=e("$UI/system/components/designerCommon/js/xuiService"),u=o.getXuiDoc(),a=n.extend({init:function(e,t){this.$domNode.find("div").attr("d_selectable","false")}}),f=n.extend({init:function(e,t){this.$domNode.find("div").attr("d_selectable","false")}}),l=n.extend({init:function(e,t){this.$domNode.find("div").attr("d_selectable","false")}});return{"$UI/system/components/justep/attachment/attachment":a,"$UI/system/components/justep/attachment/attachmentPC":f,"$UI/system/components/justep/attachment/attachmentImage":l}}),define("$model/UI2/system/components/justep/data/designer/bizData",["require","jquery","bind","$UI/system/lib/base/component","$UI/system/lib/base/xml","../data","../bizData","$UI/system/components/designerCommon/js/xuiService","css!./css/data"],function(e){var t=e("jquery"),n=e("bind"),r=e("$UI/system/lib/base/component"),i=e("$UI/system/lib/base/xml"),s=e("../data"),o=e("../bizData"),u=e("$UI/system/components/designerCommon/js/xuiService"),a=u.getXuiDoc();e("css!./css/data").load();var f=function(e,n){var r=t(e.domNode),i=r.attr("xid"),o=e.getModel();e.xid=i,l(e),s.registerData(o,i,e),r.empty().css("height","22px").css("display","block").addClass(n).append("<img align='absmiddle' style='width:16px;height:18px;'/><span>"+(i?i:"")+"</span>"),o.resolvedComponent(i)},l=function(e){var n=a.getNodeByDId(e.$domNode.attr("d_id"));if(n){var r=t(i.fromString(n).documentElement);if("true"==r.attr("isTree")){var s=r.children("treeOption");e.defTreeOption.isTree=!0,e.defTreeOption.option={isDelayLoad:"true"==s.attr("delayLoad"),parentRelation:s.attr("parentRelation"),childrenRelation:s.attr("childrenRelation"),rootFilter:s.attr("rootFilter"),nodeKindRelation:s.attr("nodeKindRelation"),nodeLevelRelation:s.attr("nodeLevelRelation")}}else e.defTreeOption.isTree=!1}},c=function(n,r){if("xid"in r){var i=t(n.domNode),o=i.attr("xid");s.unRegisterData(n.getModel(),o),s.registerData(n.getModel(),r.xid,n),i.children("span").text(r.xid?r.xid:"")}else("isTree"in r||"parentRelation"in r)&&l(n)},h=function(e){var n=[];return t(e).children("column").each(function(){var e=t(this);n.push({alias:e.attr("name"),"data-type":e.attr("type"),label:e.attr("label")})}),n},p=function(e,t){var n=a.getEditorDataSource("RuleRelationDatasource.getDatasource",null,t.d_id)||h(t.nodeXml);u.openPage("$UI/system/components/justep/data/designer/editRule.w",{title:"data规则编辑",xml:t.nodeXml,cols:n},function(t){a.replaceChild(e,t.def,{xpathCondition:"*[local-name()='rule']",jqCondition:"rule",paintComponent:!1})})},d=function(e,n){var r=e.getModel(),i={},s=r.getExtendTypes?r.getExtendTypes():[];t.each(s,function(e,t){i[e]={name:t.name,dataType:t.dataType,editor:t.editor}});var o=a.getEditorDataSource("RuleRelationDatasource.getDatasource",null,n.d_id)||h(n.nodeXml);u.openPage("$UI/system/components/justep/data/designer/editExtendType.w",{title:"data扩展类型设置",xml:n.nodeXml,extendTypes:i,cols:o},function(t){a.replaceChild(e,t.def,{xpathCondition:"*[local-name()='extendType']",jqCondition:"extendType",paintComponent:!1})})},v=0,m=0,g=0,y=o.extend({constructor:function(e){e&&e.templateNode&&this._bind(e.templateNode),this.callParent(e)},_bind:function(e){n.utils.domData.set(e,r.BIND_NAME,this),this.domNode=e,this.$domNode=t(this.domNode),n.utils.domNodeDisposal.addDisposeCallback(e,this.dispose.bind(this))},isTree:function(){return"true"==this.$domNode.attr("isTree")},getTreeOption:function(){return{parentRelation:a.get(this,"parentRelation"),nodeKindRelation:a.get(this,"nodeKindRelation"),delayLoad:"true"==a.get(this,"delayLoad"),rootFilter:a.get(this,"rootFilter")}},init:function(e,t){f(this,"x-biz-data")},set:function(e){c(this,e)},editRule:function(e){p(this,e)},editExtendType:function(e){d(this,e)},newFilter:function(e){a.createComponent("$UI/system/components/justep/data/bizData#filter",this,{defaultProperties:{name:"filter"+v++}})},newCalculate:function(){a.createComponent("$UI/system/components/justep/data/bizData#calculateRelation",this,{defaultProperties:{relation:"relation"+g++}})},newAggregate:function(){a.createComponent("$UI/system/components/justep/data/bizData#aggregateRelation",this,{defaultProperties:{relation:"aggregate"+m++}})}});return{"$UI/system/components/justep/data/bizData":y}});